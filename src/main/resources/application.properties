# =============================================
# Gym & Fitness Management System - Final Clean Configuration
# =============================================

spring.application.name=fitness-hub

# Use Railway variables
spring.datasource.url=jdbc:mysql://${MYSQLHOST}:${MYSQLPORT}/${MYSQLDATABASE}?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=UTC
spring.datasource.username=${MYSQLUSER}
spring.datasource.password=${MYSQLPASSWORD}
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# === JPA / Hibernate ===
spring.jpa.hibernate.ddl-auto=update
# During development: 'update' is fine (creates/updates tables)
# In production: change to 'validate' or 'none' after schema is stable
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect
spring.jpa.open-in-view=false
spring.jpa.properties.hibernate.format_sql=true

# === Thymeleaf ===
spring.thymeleaf.cache=false
spring.thymeleaf.enabled=true
spring.thymeleaf.prefix=classpath:/templates/
spring.thymeleaf.suffix=.html
spring.thymeleaf.mode=HTML

# === Mail (for notifications) ===
# NOTE: Email is optional. If not configured, emails will fail silently.
# To enable email notifications:
# 1. Use a real Gmail address
# 2. Generate an App Password: https://myaccount.google.com/apppasswords
# 3. Replace the placeholders below with your credentials
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=your-real-email@gmail.com
spring.mail.password=your-app-specific-password
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true

# Important: let Railway choose the port
server.port=${PORT:8081}
# === Server ===
server.error.include-message=always
server.error.include-binding-errors=always
server.error.include-stacktrace=on_param
server.error.whitelabel.enabled=false

# === Logging ===
logging.level.root=INFO
logging.level.org.springframework=INFO
logging.level.com.example.gym=DEBUG
logging.level.org.hibernate.SQL=DEBUG
# Optional: shows bound parameter values (very verbose - enable only when debugging SQL bindings)
# logging.level.org.hibernate.orm.jdbc.bind=TRACE

# === Session & Security ===
server.servlet.session.timeout=30m

# === Static resources caching ===
# Cache CSS/JS/images for 1 year (31536000 seconds) - good for production
# Comment out during development if you want instant changes
spring.web.resources.cache.period=31536000

# === Other useful settings ===
spring.jackson.serialization.indent_output=true